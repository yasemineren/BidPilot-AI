version: '3.8'

services:
  # Analitik Veritabanı (Hızlı Okuma/Yazma)
  clickhouse:
    image: clickhouse/clickhouse-server:latest
    container_name: bidpilot-clickhouse
    ports:
      - "8123:8123" # HTTP Portu (Sorgular için)
      - "9000:9000" # Native Port (Go servisi için)
    ulimits:
      nofile:
        soft: 262144
        hard: 262144
    volumes:
      - ./infra/clickhouse_data:/var/lib/clickhouse

  # Yönetim Paneli Veritabanı (Ayarlar için)
  postgres:
    image: postgres:15-alpine
    container_name: bidpilot-postgres
    environment:
      POSTGRES_USER: admin
      POSTGRES_PASSWORD: password
      POSTGRES_DB: bidpilot_control
    ports:
      - "5432:5432"
    volumes:
      - ./infra/postgres_data:/var/lib/postgresql/data